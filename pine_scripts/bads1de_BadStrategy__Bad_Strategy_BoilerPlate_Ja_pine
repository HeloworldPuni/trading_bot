//@version=5
strategy(title="Bad Strategy BoilerPlate", shorttitle="Bad Strategy BoilerPlate", overlay=true, pyramiding=1, initial_capital=10000, default_qty_type=strategy.percent_of_equity, default_qty_value=100.0, commission_type=strategy.commission.percent, commission_value=0.04, precision=6, max_lines_count=500, max_labels_count=500)

//region - ÂÖ•ÂäõÂ§âÊï∞ - „Çª„ÉÉ„Ç∑„Éß„É≥
closeSession = input.bool(false, title='üìÖ „Çª„ÉÉ„Ç∑„Éß„É≥ÁµÇ‰∫ÜÊôÇ„Å´„Éà„É¨„Éº„Éâ„ÇíÈñâ„Åò„Çã', group='„Çª„ÉÉ„Ç∑„Éß„É≥')
tradeSession = input.session(title='ÂèñÂºï„Çª„ÉÉ„Ç∑„Éß„É≥', defval='0000-2345', group='„Çª„ÉÉ„Ç∑„Éß„É≥')
//endregion

//region - ÂÖ•ÂäõÂ§âÊï∞ - „Çπ„Éà„É©„ÉÜ„Ç∏„Éº„ÅÆÊñπÂêë
enableLongStrategy = input.bool(true, title='„É≠„É≥„Ç∞„Çπ„Éà„É©„ÉÜ„Ç∏„Éº„ÇíÊúâÂäπ„Å´„Åô„Çã', group='„Çπ„Éà„É©„ÉÜ„Ç∏„Éº')
enableShortStrategy = input.bool(true, title='„Ç∑„Éß„Éº„Éà„Çπ„Éà„É©„ÉÜ„Ç∏„Éº„ÇíÊúâÂäπ„Å´„Åô„Çã', group='„Çπ„Éà„É©„ÉÜ„Ç∏„Éº')
closeOnOpposite = input.bool(false, title='ÂèçÂØæ„Ç∑„Ç∞„Éä„É´„ÅßÈñâ„Åò„Çã', group='„Çπ„Éà„É©„ÉÜ„Ç∏„Éº')
//endregion

//region - ÂÖ•ÂäõÂ§âÊï∞ - Êó•‰ªò„Å®ÊôÇÈñì
setCloseTime = input.bool(false, 'üìÖ ÁâπÂÆö„ÅÆÊôÇÈñì„Å´Èñâ„Åò„Çã', group='Êó•‰ªò')
closeTimeHour = input.int(23, title='ÁµÇ‰∫ÜÊôÇÈñì', group='Êó•‰ªò')
closeTimeMinute = input.int(00, title='ÁµÇ‰∫ÜÂàÜ', group='Êó•‰ªò')
setTimeLimit = input.bool(false, 'üìÖ „Éù„Ç∏„Ç∑„Éß„É≥„ÅÆÊôÇÈñìÂà∂Èôê„ÇíË®≠ÂÆö„Åô„Çã', group='Êó•‰ªò')
holdLongBars = input.int(60, title='„É≠„É≥„Ç∞‰øùÊåÅÊúüÈñì („Éê„Éº)', group='Êó•‰ªò')
holdShortBars = input.int(60, title='„Ç∑„Éß„Éº„Éà‰øùÊåÅÊúüÈñì („Éê„Éº)', group='Êó•‰ªò')
dateFilter = input.bool(false, 'üìÖ Êó•‰ªòÁØÑÂõ≤„Éï„Ç£„É´„Çø„Éº', group='Êó•‰ªò')
startTime = input.time(defval=timestamp('01 Jan 2000 13:30 +0000'), title='ÈñãÂßãÊôÇÈñì', group='Êó•‰ªò')
endTime = input.time(defval=timestamp('30 Dec 2077 23:30 +0000'), title='ÁµÇ‰∫ÜÊôÇÈñì', group='Êó•‰ªò')
//endregion

//region - Êó•‰ªòÁØÑÂõ≤Èñ¢Êï∞
tradeDateIsAllowed() =>
    dateFilter ? time >= startTime and time <= endTime : true
//endregion

//region - ÂÖ•ÂäõÂ§âÊï∞ - „Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº
// „Éì„ÉÉ„Ç∞„Éñ„É´„Éï„Ç£„É´„Çø„Éº
filterBigMovesBull = input.bool(false, "üìà „Éì„ÉÉ„Ç∞„Éñ„É´„Éï„Ç£„É´„Çø„Éº„ÇíÊúâÂäπ„Å´„Åô„Çã", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº")
filterBullBar = input.int(3, 'Âº∑Ê∞óÊúüÈñì („Éê„Éº)', group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº")
filterBigMovesValueBull = input.float(3.0, title="Âº∑Ê∞óÂ§âÂãïÈñæÂÄ§ (%)", minval=0, maxval=100, step=0.1, group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº") / 100

// „Éì„ÉÉ„Ç∞„Éô„Ç¢„Éï„Ç£„É´„Çø„Éº
filterBigMovesBear = input.bool(false, "üìà „Éì„ÉÉ„Ç∞„Éô„Ç¢„Éï„Ç£„É´„Çø„Éº„ÇíÊúâÂäπ„Å´„Åô„Çã", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº")
filterBearBar = input.int(2, 'Âº±Ê∞óÊúüÈñì („Éê„Éº)', group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº")
filterBigMovesValueBear = input.float(2, title="Âº±Ê∞óÂ§âÂãïÈñæÂÄ§ (%)", minval=0, maxval=100, step=0.1, group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº") / 100

// „ÉÄ„Éñ„É´„Éá„Ç£„ÉÉ„Éî„É≥„Ç∞„Éï„Ç£„É´„Çø„Éº
noDoubleDipping = input.bool(false, "üìà „ÉÄ„Éñ„É´„Éá„Ç£„ÉÉ„Éî„É≥„Ç∞„Éï„Ç£„É´„Çø„Éº„ÇíÊúâÂäπ„Å´„Åô„Çã", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº")
dipBars = input.int(6, "ÂÜç„Ç®„É≥„Éà„É™„Éº„ÇØ„Éº„É´„ÉÄ„Ç¶„É≥ („Éê„Éº)", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº")

// ÁßªÂãïÂπ≥Âùá #1 „Éï„Ç£„É´„Çø„Éº
useLongEmaFilter1 = input.bool(false, "üìà MA #1 „Çà„Çä‰∏ä„Åß„É≠„É≥„Ç∞„Ç®„É≥„Éà„É™„Éº", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#1")
useShortEmaFilter1 = input.bool(false, "üìà MA #1 „Çà„Çä‰∏ã„Åß„Ç∑„Éß„Éº„Éà„Ç®„É≥„Éà„É™„Éº", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#1")
maPeriod1 = input.int(21, "MA #1 ÊúüÈñì", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#1")
typeMA1 = input.string(title="MA #1 „Çø„Ç§„Éó", defval="SMA", options=["SMA", "EMA", "SMMA (RMA)", "WMA", "VWMA", "DEMA", "HMA", "T3", "GMA", "KAMA", "VIDYA", "Karobein", "ELF", "SW-MA", "TRAMA", "McGinley", "LSMA", "Kijun"], group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#1")
maExType1 = input.string(title="MA #1 „ÇΩ„Éº„Çπ", defval="Close", options=["MA#1", "MA#2", "MA#3", "Close", "High", "Low", "Open"], group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#1")
distanceToMa1 = input.float(0.0, title="MA #1 „Éê„ÉÉ„Éï„Ç° (%)", minval=-1, maxval=1, step=0.001, group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#1")

// ÁßªÂãïÂπ≥Âùá #2 „Éï„Ç£„É´„Çø„Éº
useLongEmaFilter2 = input.bool(false, "üìà MA #2 „Çà„Çä‰∏ä„Åß„É≠„É≥„Ç∞„Ç®„É≥„Éà„É™„Éº", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#2")
useShortEmaFilter2 = input.bool(false, "üìà MA #2 „Çà„Çä‰∏ã„Åß„Ç∑„Éß„Éº„Éà„Ç®„É≥„Éà„É™„Éº", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#2")
maPeriod2 = input.int(55, "MA #2 ÊúüÈñì", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#2")
typeMA2 = input.string(title="MA #2 „Çø„Ç§„Éó", defval="SMA", options=["SMA", "EMA", "HMA", "T3",  "KAMA",  "McGinley", "LSMA", "Kijun"], group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#2")
maExType2 = input.string(title="MA #2 „ÇΩ„Éº„Çπ", defval="Close", options=["MA#1", "MA#2", "MA#3", "Close", "High", "Low", "Open"], group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#2")
distanceToMa2 = input.float(0.0, title="MA #2 „Éê„ÉÉ„Éï„Ç° (%)", minval=-1, maxval=1, step=0.001, group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#2")

// ÁßªÂãïÂπ≥Âùá #3 „Éï„Ç£„É´„Çø„Éº
useLongEmaFilter3 = input.bool(false, "üìà MA #3 „Çà„Çä‰∏ä„Åß„É≠„É≥„Ç∞„Ç®„É≥„Éà„É™„Éº", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#3")
useShortEmaFilter3 = input.bool(false, "üìà MA #3 „Çà„Çä‰∏ã„Åß„Ç∑„Éß„Éº„Éà„Ç®„É≥„Éà„É™„Éº", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#3")
maPeriod3 = input.int(200, "MA #3 ÊúüÈñì", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#3")
typeMA3 = input.string(title="MA #3 „Çø„Ç§„Éó", defval="SMA", options=["SMA", "EMA", "HMA", "T3",  "KAMA",  "McGinley", "LSMA", "Kijun"], group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#3")
maExType3 = input.string(title="MA #3 „ÇΩ„Éº„Çπ", defval="Close", options=["MA#1", "MA#2", "MA#3", "Close", "High", "Low", "Open"], group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#3")
distanceToMa3 = input.float(0.0, title="MA #3 „Éê„ÉÉ„Éï„Ç° (%)", minval=-1, maxval=1, step=0.001, group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="MA#3")

// Âπ≥ÂùáÊñπÂêëÊÄßÊåáÊï∞ (ADX) „Éï„Ç£„É´„Çø„Éº
filterAdx = input.bool(false, "üìà ADX„Éï„Ç£„É´„Çø„Éº„ÇíÊúâÂäπ„Å´„Åô„Çã", group='„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº')
adxLength = input.int(title='ADX„ÅÆÈï∑„Åï', defval=14, group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº")
adxThreshold = input.int(title='ADX„ÅÆÈñæÂÄ§', defval=20, group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº")
typeMA2Adx = input.string(title="ADX MA„Çø„Ç§„Éó", defval="SMA", options=["SMA", "EMA", "HMA", "T3",  "KAMA",  "McGinley", "LSMA", "Kijun"], group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº")
diCrossPoint = input.int(40, title="DI„ÇØ„É≠„Çπ„Éù„Ç§„É≥„Éà", group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº")
adxSlope = input.float(3.5, minval=0, maxval=300, title='ADX„Çπ„É≠„Éº„Éó', step=0.5, group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº")
typeADX = input.string(title="ADX„Çø„Ç§„Éó", defval="ADX", options=["ADX", "DI Cross", "ADX Slope"], group="„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº")

// „É¨„É≥„Ç∏„Éï„É≠„Éº„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ (RFI) „Éï„Ç£„É´„Çø„Éº
filterRf = input.bool(false, 'üìà RFI„Éï„Ç£„É´„Çø„Éº„ÇíÊúâÂäπ„Å´„Åô„Çã', group='„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº')
rfSource = input.source(close, "RFI„ÇΩ„Éº„Çπ", group='„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº')
rfPeriod = input.int(defval=50, minval=1, title='RFI„Çµ„É≥„Éó„É™„É≥„Ç∞ÊúüÈñì', group='„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº')
rfMultiplier = input.float(defval=3.0, minval=0.1, title='RFI„É¨„É≥„Ç∏‰πóÊï∞', group='„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº')

// „Çπ„Éº„Éë„Éº„Éà„É¨„É≥„Éâ„Éï„Ç£„É´„Çø„Éº
filterSupertrend = input.bool(false, title="üìà „Çπ„Éº„Éë„Éº„Éà„É¨„É≥„Éâ„Éï„Ç£„É´„Çø„Éº„ÇíÊúâÂäπ„Å´„Åô„Çã", group='„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº')
supertrendLength = input.int(defval=8, title='„Çπ„Éº„Éë„Éº„Éà„É¨„É≥„ÉâATRÊúüÈñì', group='„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº')
supertrendMultiplier = input.float(defval=1.8, title='„Çπ„Éº„Éë„Éº„Éà„É¨„É≥„ÉâATR‰πóÊï∞', step=0.1, group='„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº')
//endregion

//region - ÂÖ•ÂäõÂ§âÊï∞ - ÊõúÊó•„Éï„Ç£„É´„Çø„Éº
// ÊõúÊó•„Éï„Ç£„É´„Çø„Éº - „É≠„É≥„Ç∞
mondayLong = input.bool(true, "ÊúàÊõúÊó•", group="„É≠„É≥„Ç∞ÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week")
tuesdayLong = input.bool(true, "ÁÅ´ÊõúÊó•", group="„É≠„É≥„Ç∞ÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week")
wednesdayLong = input.bool(true, "Ê∞¥ÊõúÊó•", group="„É≠„É≥„Ç∞ÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week")
thursdayLong = input.bool(true, "Êú®ÊõúÊó•", group="„É≠„É≥„Ç∞ÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week")
fridayLong = input.bool(true, "ÈáëÊõúÊó•", group="„É≠„É≥„Ç∞ÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week")
saturdayLong = input.bool(false, "ÂúüÊõúÊó•", group="„É≠„É≥„Ç∞ÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week")
sundayLong = input.bool(false, "Êó•ÊõúÊó•", group="„É≠„É≥„Ç∞ÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week")

// ÊõúÊó•„Éï„Ç£„É´„Çø„Éº - „Ç∑„Éß„Éº„Éà
mondayShort = input.bool(true, "ÊúàÊõúÊó•", group="„Ç∑„Éß„Éº„ÉàÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week_S")
tuesdayShort = input.bool(true, "ÁÅ´ÊõúÊó•", group="„Ç∑„Éß„Éº„ÉàÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week_S")
wednesdayShort = input.bool(true, "Ê∞¥ÊõúÊó•", group="„Ç∑„Éß„Éº„ÉàÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week_S")
thursdayShort = input.bool(true, "Êú®ÊõúÊó•", group="„Ç∑„Éß„Éº„ÉàÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week_S")
fridayShort = input.bool(true, "ÈáëÊõúÊó•", group="„Ç∑„Éß„Éº„ÉàÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week_S")
saturdayShort = input.bool(false, "ÂúüÊõúÊó•", group="„Ç∑„Éß„Éº„ÉàÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week_S")
sundayShort = input.bool(false, "Êó•ÊõúÊó•", group="„Ç∑„Éß„Éº„ÉàÊõúÊó•„Ç®„É≥„Éà„É™„Éº„Éï„Ç£„É´„Çø„Éº", inline="week_S")
//endregion

//region - ÂÖ•ÂäõÂ§âÊï∞ - „Çπ„Éà„ÉÉ„Éó„É≠„Çπ
stopType = input.string(title='„Çπ„Éà„ÉÉ„Éó„É≠„Çπ„Çø„Ç§„Éó', defval='ATR', options=['None', 'Percent', 'ATR', 'ATR Trailing'], inline="StopType", group="„Çπ„Éà„ÉÉ„Éó„É≠„Çπ")

// „Éë„Éº„Çª„É≥„Éà„Çπ„Éà„ÉÉ„Éó„É≠„Çπ
lossPercentage = input.float(title='„Çπ„Éà„ÉÉ„Éó„É≠„Çπ (%)', minval=0.0, step=0.1, defval=1.8, inline="LOSS", group="„Çπ„Éà„ÉÉ„Éó„É≠„Çπ") * 0.01

// ATR„Çπ„Éà„ÉÉ„Éó„É≠„Çπ
atrStopLength = input.int(title='ATRÊúüÈñì', defval=14, inline="ATR", group="„Çπ„Éà„ÉÉ„Éó„É≠„Çπ")
riskRatioATR = input.float(defval=2.0, title='ATR‰πóÊï∞', step=0.10, inline="ATR", group="„Çπ„Éà„ÉÉ„Éó„É≠„Çπ")

// ATR„Éà„É¨„Éº„É™„É≥„Ç∞„Çπ„Éà„ÉÉ„Éó„É≠„Çπ
atrTrailingLength = input.int(14, minval=1, title='„Éà„É¨„Éº„É™„É≥„Ç∞ÊúüÈñì', inline="inputsATR", group="„Çπ„Éà„ÉÉ„Éó„É≠„Çπ")
atrTrailingMultiplier = input.float(1.5, title='„Éà„É¨„Éº„É™„É≥„Ç∞‰πóÊï∞', step=0.1, inline="inputsATR", group="„Çπ„Éà„ÉÉ„Éó„É≠„Çπ")

// „Çπ„Éà„ÉÉ„Éó„É≠„Çπ„Çà„Çä‰∏ã„ÅßÁµÇÂÄ§„ÅåÂøÖË¶Å
closeStop = input.bool(false, "„Çπ„Éà„ÉÉ„Éó„É≠„Çπ„Çà„Çä‰∏ã„ÅßÁµÇÂÄ§„ÅåÂøÖË¶Å", inline="equire Close Below Stop Loss", group="„Çπ„Éà„ÉÉ„Éó„É≠„Çπ")
emergencyStopPercentage = input.float(0.3, step=0.1, minval=0.0, title="Á∑äÊÄ•„Çπ„Éà„ÉÉ„Éó„É≠„Çπ (%)", group="„Çπ„Éà„ÉÉ„Éó„É≠„Çπ") * 0.01
//endregion

//region - ÂÖ•ÂäõÂ§âÊï∞ - „ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà
takeProfitType = input.string(title='„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà„Çø„Ç§„Éó', defval='RR', options=['None', 'Percent', 'RR', 'ATR'], inline="TakeProfitType", group="„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà")

// „Éë„Éº„Çª„É≥„Éà„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà
longProfitPercentage = input.float(title='„É≠„É≥„Ç∞„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà (%)', minval=0.0, step=0.1, defval=1.5, inline="TP", group="„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà") * 0.01
shortProfitPercentage = input.float(title='„Ç∑„Éß„Éº„Éà„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà (%)', minval=0.0, step=0.1, defval=1.5, inline="TP", group="„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà") * 0.01

// „É™„Çπ„ÇØ/„É™„ÉØ„Éº„Éâ„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà
longRiskRewardRatio = input.float(title="„É≠„É≥„Ç∞„É™„Çπ„ÇØ/„É™„ÉØ„Éº„Éâ„É¨„Ç∑„Ç™ (1:x)", step=0.1, defval=1.5, minval=0, inline="RR", group="„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà")
shortRiskRewardRatio = input.float(title="„Ç∑„Éß„Éº„Éà„É™„Çπ„ÇØ/„É™„ÉØ„Éº„Éâ„É¨„Ç∑„Ç™ (1:x)", step=0.1, defval=1.5, minval=0, inline="RR", group="„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà")

// ATR„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà
atrTakeProfitLength = input.int(defval=14, title='ATRÊúüÈñì', minval=1, inline='Take Profit ATR Multiplier', group="„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà")
longTakeProfitAtrMultiplier = input.float(defval=2.0, title='„É≠„É≥„Ç∞ATR‰πóÊï∞', minval=0.1, step=0.1, inline='Take Profit ATR Multiplier', group="„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà")
shortTakeProfitAtrMultiplier = input.float(defval=2.0, title='„Ç∑„Éß„Éº„ÉàATR‰πóÊï∞', minval=0.1, step=0.1, inline='Take Profit ATR Multiplier', group="„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà")
//endregion

//region - ÂÖ•ÂäõÂ§âÊï∞ - „Éà„É¨„Éº„É™„É≥„Ç∞„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà
takeProfitTrailingEnabled = input.bool(defval=false, title="‚ö†Ô∏è„Éà„É¨„Éº„É™„É≥„Ç∞„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà", tooltip='„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà„ÅÆ„Éà„É¨„Éº„É™„É≥„Ç∞„ÇíÊúâÂäπ„Åæ„Åü„ÅØÁÑ°Âäπ„Å´„Åó„Åæ„Åô„ÄÇË≠¶ÂëäÔºÅ„Åì„ÅÆÊ©üËÉΩ„ÅØ„É™„Éö„Ç§„É≥„Éà„Åï„Çå„Åæ„Åô„ÄÇ„Äå„Éê„ÉºÊã°Â§ßÈè°„Äç„Å®„Äå„Éá„Ç£„Éº„Éó„Éê„ÉÉ„ÇØ„ÉÜ„Çπ„Éà„Äç„Çí‰ΩøÁî®„Åó„Å¶„ÄÅÁèæÂÆüÁöÑ„Å™„Éê„ÉÉ„ÇØ„ÉÜ„Çπ„ÉàÁµêÊûú„ÇíÂæó„Çã„Çà„ÅÜ„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ', group="„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà")
deviationMethod = input.string(defval='PERC', title='ÂÅèÂ∑ÆË®àÁÆóÊ≥ï', options=['PERC', 'ATR'], tooltip='„Éà„É¨„Éº„É™„É≥„Ç∞„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà„ÅÆÂÅèÂ∑Æ„ÇíË®àÁÆó„Åô„ÇãÊñπÊ≥ï„ÄÇ', group="„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà")
trailingTakeProfitDeviationPerc = input.float(defval=1.0, title='„Éà„É¨„Éº„É™„É≥„Ç∞„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„ÉàÂÅèÂ∑Æ %', minval=0.01, maxval=100, step=0.01, tooltip='„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà„É™„Éü„ÉÉ„Éà„Å´ÈÅî„Åó„Åü„Å®„Åç„Å´‰æ°Ê†º„ÇíËøΩË∑°„Åô„Çã„Çπ„ÉÜ„ÉÉ„Éó„ÄÇ', group="„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà") / 100
deviationAtrMultiplier = input.float(defval=1.0, title='ÂÅèÂ∑ÆATR‰πóÊï∞', minval=0.01, step=0.05, tooltip='„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„ÉàÁõÆÊ®ô„Å´ÈÅî„Åó„Åü„Å®„Åç„Å´„ÄÅ‰æ°Ê†º„ÇíËøΩË∑°„Åô„Çã„Åü„ÇÅ„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó„ÇíË®àÁÆó„Åô„Çã„Åü„ÇÅ„Å´„ÄÅÂàùÊúü„Ç®„É≥„Éà„É™„Éº„ÅÆATR„Å´‰ΩøÁî®„Åï„Çå„Çã‰πóÊï∞„ÄÇ', group="„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà")
//endregion


//region - ÂÖ•ÂäõÂ§âÊï∞ - Ê≥®Êñá„Çµ„Ç§„Ç∫
useStop = input.bool(false, "üèõÔ∏èÊ≥®Êñá„Çµ„Ç§„Ç∫„ÇíÊúâÂäπ„Å´„Åô„Çã", group="üèõÔ∏èÊ≥®Êñá„Çµ„Ç§„Ç∫")
setRisk = input.string(title="Ê≥®Êñá„Çµ„Ç§„Ç∫Ë®àÁÆóÊñπÊ≥ï", defval="„É™„Çπ„ÇØ„Éô„Éº„Çπ", options=["„É™„Çπ„ÇØ„Éô„Éº„Çπ", "„Çø„Éº„Éà„É´", "„É¨„Éê„É¨„ÉÉ„Ç∏", "„ÉÜ„ÇØ„Éã„Ç´„É´„Ç¢„É´„Ç¥"], group="üèõÔ∏èÊ≥®Êñá„Çµ„Ç§„Ç∫", inline="risk")
riskValue = input.float(2.0, title="„É™„Çπ„ÇØ (%)", inline="risk", group="üèõÔ∏èÊ≥®Êñá„Çµ„Ç§„Ç∫")
leverage = input.float(1, '„É¨„Éê„É¨„ÉÉ„Ç∏', step=.5, group="üèõÔ∏èÊ≥®Êñá„Çµ„Ç§„Ç∫", inline="risk")
lowZoneMultiplier = input.float(0.5, "‰Ωé„É™„Çπ„ÇØ„Çæ„Éº„É≥‰πóÊï∞", step=0.1, minval=0, maxval=10, group="üèõÔ∏èÊ≥®Êñá„Çµ„Ç§„Ç∫", inline="DA")
midZoneMultiplier = input.float(1, "‰∏≠„É™„Çπ„ÇØ„Çæ„Éº„É≥‰πóÊï∞", step=0.1, minval=0, maxval=10, group="üèõÔ∏èÊ≥®Êñá„Çµ„Ç§„Ç∫", inline="DA")
highZoneMultiplier = input.float(1.5, "È´ò„É™„Çπ„ÇØ„Çæ„Éº„É≥‰πóÊï∞", step=0.1, minval=0, maxval=10, group="üèõÔ∏èÊ≥®Êñá„Çµ„Ç§„Ç∫", inline="DA")
riskSourceInput = input.string('ATR', 'ÂãïÁöÑË™øÊï¥„ÇΩ„Éº„Çπ', options=['close', 'volume', 'MA 5', 'MA 25', 'MACD', 'volume MA', 'ATR', 'VWAP', 'RSI', 'MFI', 'ADX'], group="üèõÔ∏èÊ≥®Êñá„Çµ„Ç§„Ç∫", inline="DA2")
riskBandwidth = input.float(3.1, "„É™„Çπ„ÇØ„Éê„É≥„ÉâÂπÖ", step=0.01, minval=2, group="üèõÔ∏èÊ≥®Êñá„Çµ„Ç§„Ç∫", inline="DA2")
//endregion

//region - „ÉÜ„ÇØ„Éã„Ç´„É´ÊåáÊ®ô

// T3 ÁßªÂãïÂπ≥Âùá
T3(float src, int len) =>
    var float result = 0.0
    xPrice = close
    xe1 = ta.ema(xPrice, len)
    xe2 = ta.ema(xe1, len)
    xe3 = ta.ema(xe2, len)
    xe4 = ta.ema(xe3, len)
    xe5 = ta.ema(xe4, len)
    xe6 = ta.ema(xe5, len)
    b = 0.7
    c1 = -b * b * b
    c2 = 3 * b * b + 3 * b * b * b
    c3 = -6 * b * b - 3 * b - 3 * b * b * b
    c4 = 1 + 3 * b + b * b * b + 3 * b * b
    result := c1 * xe6 + c2 * xe5 + c3 * xe4 + c4 * xe3
    result


// „Ç´„Ç¶„Éï„Éû„É≥„ÅÆÈÅ©ÂøúÁßªÂãïÂπ≥Âùá (KAMA)
KAMA(float _src, int _len) =>
    tmpVal = 0.0
    direction = math.abs(_src - _src[_len])
    volatility = math.sum(math.abs(_src - _src[1]), _len)
    er = volatility != 0 ? direction / volatility : 0
    fastSC = 0.666
    slowSC = 0.0645
    sc = math.pow(er * (fastSC - slowSC) + slowSC, 2)
    tmpVal := nz(tmpVal[1]) + sc * (_src - nz(tmpVal[1]))
    tmpVal


// „Éû„ÉÉ„ÇÆ„É≥„É¨„Éº„ÉÄ„Ç§„Éä„Éü„ÉÉ„ÇØÊåáÊ®ô (McGinley)
Mc(float src, int length) =>
    var float mg = 0.0
    mg := na(mg[1]) ? ta.ema(src, length) : mg[1] + (src - mg[1]) / (length * math.pow(src / mg[1], 4))
    mg

// Á∑öÂΩ¢ÂõûÂ∏∞ (LSMA)
lsma(float src, int len) =>
    var float result = 0.0
    result := ta.linreg(src, len, 0)
    result

// Âü∫Ê∫ñÁ∑ö (‰∏ÄÁõÆÂùáË°°Ë°®„Çà„Çä)
kj(float src, int len) =>
    var float result = 0.0
    kijun = math.avg(ta.lowest(len), ta.highest(len))
    result := kijun
    result

// ‰∏ÄËà¨ÂåñÁßªÂãïÂπ≥ÂùáÈñ¢Êï∞
ma(source, length, type) =>
    switch type
        "SMA" => ta.sma(source, length)
        "EMA" => ta.ema(source, length)
        "HMA" => ta.hma(source, length)
        "T3" => T3(source, length)
        "KAMA" => KAMA(source, length)
        "McGinley" => Mc(source, length)
        "LSMA" => lsma(source, length)
        "Kijun" => kj(source, length)
        => na
//endregion

//region - ADX Ë®àÁÆó
trueRange = math.max(math.max(high - low, math.abs(high - nz(close[1]))), math.abs(low - nz(close[1])))
directionalMovementPlus = high - nz(high[1]) > nz(low[1]) - low ? math.max(high - nz(high[1]), 0) : 0
directionalMovementMinus = nz(low[1]) - low > high - nz(high[1]) ? math.max(nz(low[1]) - low, 0) : 0

smoothedTrueRange = 0.0
smoothedTrueRange := nz(smoothedTrueRange[1]) - nz(smoothedTrueRange[1]) / adxLength + trueRange
smoothedDirectionalMovementPlus = 0.0
smoothedDirectionalMovementPlus := nz(smoothedDirectionalMovementPlus[1]) - nz(smoothedDirectionalMovementPlus[1]) / adxLength + directionalMovementPlus
smoothedDirectionalMovementMinus = 0.0
smoothedDirectionalMovementMinus := nz(smoothedDirectionalMovementMinus[1]) - nz(smoothedDirectionalMovementMinus[1]) / adxLength + directionalMovementMinus

diPlus = smoothedDirectionalMovementPlus / smoothedTrueRange * 100
diMinus = smoothedDirectionalMovementMinus / smoothedTrueRange * 100
dx = math.abs(diPlus - diMinus) / (diPlus + diMinus) * 100
adx = switch typeMA2Adx
    "SMA" => ta.sma(dx, adxLength)
    "EMA" => ta.ema(dx, adxLength)
    "HMA" => ta.hma(dx, adxLength)
    "T3" => T3(dx, adxLength)
    "KAMA" => KAMA(dx, adxLength)
    "McGinley" => Mc(dx, adxLength)
    "LSMA" => lsma(dx, adxLength)
    "Kijun" => kj(dx, adxLength)
    => na

// ADX „Éï„Ç£„É´„Çø„ÉºÊù°‰ª∂
setAdx = adx > adxThreshold
setAdxBuy = switch typeADX
    "ADX" => setAdx
    "DI Cross" => diPlus >= diCrossPoint
    "ADX Slope" => setAdx and (adx[2] + adxSlope < adx[1]) and (adx[1] + adxSlope < adx)
    => na

setAdxSell = switch typeADX
    "ADX" => setAdx
    "DI Cross" => diMinus >= diCrossPoint
    "ADX Slope" => setAdx and (adx[2] + adxSlope < adx[1]) and (adx[1] + adxSlope < adx)
    => na
//endregion

//region - „É¨„É≥„Ç∏„Éï„Ç£„É´„Çø„ÉºË®àÁÆó
// „Çπ„É†„Éº„Ç∫Âπ≥Âùá„É¨„É≥„Ç∏
smoothrng(x, t, m) =>
    wper = t * 2 - 1
    avrng = ta.ema(math.abs(x - x[1]), t)
    smoothrng = ta.ema(avrng, wper) * m
    smoothrng

smoothedRange = smoothrng(rfSource, rfPeriod, rfMultiplier)

// „É¨„É≥„Ç∏„Éï„Ç£„É´„Çø„Éº
rngfilt(x, r) =>
    rngfilt = x
    rngfilt := x > nz(rngfilt[1]) ? x - r < nz(rngfilt[1]) ? nz(rngfilt[1]) : x - r : x + r > nz(rngfilt[1]) ? nz(rngfilt[1]) : x + r
    rngfilt

filt = rngfilt(rfSource, smoothedRange)

// „Éï„Ç£„É´„Çø„ÉºÊñπÂêë
upward = 0.0
upward := filt > filt[1] ? nz(upward[1]) + 1 : filt < filt[1] ? 0 : nz(upward[1])
downward = 0.0
downward := filt < filt[1] ? nz(downward[1]) + 1 : filt > filt[1] ? 0 : nz(downward[1])

// „Çø„Éº„Ç≤„ÉÉ„Éà„Éê„É≥„Éâ
hband = filt + smoothedRange
lband = filt - smoothedRange

// „Éñ„É¨„Ç§„ÇØ„Ç¢„Ç¶„Éà
longCond = bool(na)
shortCond = bool(na)
longCond := rfSource > filt and rfSource > rfSource[1] and upward > 0 or rfSource > filt and rfSource < rfSource[1] and upward > 0
shortCond := rfSource < filt and rfSource < rfSource[1] and downward > 0 or rfSource < filt and rfSource > rfSource[1] and downward > 0

CondIni = 0
CondIni := longCond ? 1 : shortCond ? -1 : CondIni[1]
longRf = longCond
shortRf = shortCond
//endregion

//region - ÁßªÂãïÂπ≥Âùá„ÇΩ„Éº„ÇπÈÅ∏Êäû
maEx1 = (ma(close, maPeriod1, typeMA1) * (1 + distanceToMa1))
maEx2 = (ma(close, maPeriod2, typeMA2) * (1 + distanceToMa2))
maEx3 = (ma(close, maPeriod3, typeMA3) * (1 + distanceToMa3))

// MA„ÇΩ„Éº„Çπ„ÅÆÈÅ∏Êäû„Çí„Çπ„Ç§„ÉÉ„ÉÅÊñá„ÅßÂÆüË£Ö
maExTypeFinal1 = switch maExType1
    "MA#1" => maEx1
    "MA#2" => maEx2
    "MA#3" => maEx3
    "Close" => close
    "High" => high
    "Low" => low
    "Open" => open
    => na

maExTypeFinal2 = switch maExType2
    "MA#1" => maEx1
    "MA#2" => maEx2
    "MA#3" => maEx3
    "Close" => close
    "High" => high
    "Low" => low
    "Open" => open
    => na

maExTypeFinal3 = switch maExType3
    "MA#1" => maEx1
    "MA#2" => maEx2
    "MA#3" => maEx3
    "Close" => close
    "High" => high
    "Low" => low
    "Open" => open
    => na
//endregion

//region - „Çπ„Éº„Éë„Éº„Éà„É¨„É≥„ÉâË®àÁÆó
superTrendAtr = supertrendMultiplier * ta.atr(supertrendLength)

superTrendLongStop = hl2 - superTrendAtr
superTrendLongStopPrev = nz(superTrendLongStop[1], superTrendLongStop)
superTrendLongStop := close[1] > superTrendLongStopPrev ? math.max(superTrendLongStop, superTrendLongStopPrev) : superTrendLongStop

superTrendShortStop = hl2 + superTrendAtr
superTrendShortStopPrev = nz(superTrendShortStop[1], superTrendShortStop)
superTrendShortStop := close[1] < superTrendShortStopPrev ? math.min(superTrendShortStop, superTrendShortStopPrev) : superTrendShortStop

superTrendDirection = 1
superTrendDirection := nz(superTrendDirection[1], superTrendDirection)
superTrendDirection := superTrendDirection == -1 and close > superTrendShortStopPrev ? 1 : superTrendDirection == 1 and close < superTrendLongStopPrev ? -1 : superTrendDirection

//„Çπ„Éº„Éë„Éº„Éà„É¨„É≥„ÉâÊù°‰ª∂
superTrendLong = superTrendDirection == 1 ? superTrendLongStop : na
superTrendShort = superTrendDirection == 1 ? na : superTrendShortStop

superTrendLongCondition = close > superTrendLong
superTrendShortCondition = close < superTrendShort
//endregion

//region - „Éï„Ç£„É´„Çø„ÉºÈÅ©Áî®
// „Éï„Ç£„É´„Çø„ÉºÂ§âÊï∞„ÅÆÂàùÊúüÂåñ - ÂàùÊúüÂÄ§„Çífalse„Å´Ë®≠ÂÆö„Åó„ÄÅÊù°‰ª∂„ÇíÊ∫Ä„Åü„Åó„ÅüÂ†¥Âêà„Å´true„Å´„Åô„Çã
goForLong = false
goForShort = false

// „Éì„ÉÉ„Ç∞„É†„Éº„Éñ„Éï„Ç£„É´„Çø„Éº
passBigMovesBullFilter = not filterBigMovesBull or (close / close[filterBullBar] - 1) <= filterBigMovesValueBull
passBigMovesBearFilter = not filterBigMovesBear or (1 - close / close[filterBearBar]) <= filterBigMovesValueBear

// „ÉÄ„Éñ„É´„Éá„Ç£„ÉÉ„Éî„É≥„Ç∞„Éï„Ç£„É´„Çø„Éº
passDoubleDippingFilter = not noDoubleDipping or ta.barssince(strategy.position_size > 0 or strategy.position_size < 0) >= dipBars

// ÁßªÂãïÂπ≥Âùá„Éï„Ç£„É´„Çø„Éº - „É≠„É≥„Ç∞
passLongEmaFilter1 = not useLongEmaFilter1 or maEx1 < maExTypeFinal1
passLongEmaFilter2 = not useLongEmaFilter2 or maEx2 < maExTypeFinal2
passLongEmaFilter3 = not useLongEmaFilter3 or maEx3 < maExTypeFinal3

// ÁßªÂãïÂπ≥Âùá„Éï„Ç£„É´„Çø„Éº - „Ç∑„Éß„Éº„Éà
passShortEmaFilter1 = not useShortEmaFilter1 or maEx1 > maExTypeFinal1
passShortEmaFilter2 = not useShortEmaFilter2 or maEx2 > maExTypeFinal2
passShortEmaFilter3 = not useShortEmaFilter3 or maEx3 > maExTypeFinal3

// ÊõúÊó•„Éï„Ç£„É´„Çø„Éº
passDayOfWeekLongFilter = (dayofweek == dayofweek.monday and mondayLong) or
                         (dayofweek == dayofweek.tuesday and tuesdayLong) or
                         (dayofweek == dayofweek.wednesday and wednesdayLong) or
                         (dayofweek == dayofweek.thursday and thursdayLong) or
                         (dayofweek == dayofweek.friday and fridayLong) or
                         (dayofweek == dayofweek.saturday and saturdayLong) or
                         (dayofweek == dayofweek.sunday and sundayLong)

passDayOfWeekShortFilter = (dayofweek == dayofweek.monday and mondayShort) or
                          (dayofweek == dayofweek.tuesday and tuesdayShort) or
                          (dayofweek == dayofweek.wednesday and wednesdayShort) or
                          (dayofweek == dayofweek.thursday and thursdayShort) or
                          (dayofweek == dayofweek.friday and fridayShort) or
                          (dayofweek == dayofweek.saturday and saturdayShort) or
                          (dayofweek == dayofweek.sunday and sundayShort)

// ADX „Éï„Ç£„É´„Çø„Éº
passAdxLongFilter = not filterAdx or setAdxBuy
passAdxShortFilter = not filterAdx or setAdxSell

// „É¨„É≥„Ç∏„Éï„Ç£„É´„Çø„Éº
passRfLongFilter = not filterRf or longRf
passRfShortFilter = not filterRf or shortRf

// „Çπ„Éº„Éë„Éº„Éà„É¨„É≥„Éâ„Éï„Ç£„É´„Çø„Éº
passSuperTrendLongFilter = not filterSupertrend or superTrendLongCondition
passSuperTrendShortFilter = not filterSupertrend or superTrendShortCondition

// „Åô„Åπ„Å¶„ÅÆ„Éï„Ç£„É´„Çø„Éº„ÇíÈÄöÈÅé„Åó„ÅüÂ†¥Âêà„Å´„ÅÆ„ÅøÂèñÂºï„ÇíË®±ÂèØ
goForLong := passBigMovesBullFilter and
             passDoubleDippingFilter and
             passLongEmaFilter1 and
             passLongEmaFilter2 and
             passLongEmaFilter3 and
             passDayOfWeekLongFilter and
             passAdxLongFilter and
             passRfLongFilter and
             passSuperTrendLongFilter

goForShort := passBigMovesBearFilter and
              passDoubleDippingFilter and
              passShortEmaFilter1 and
              passShortEmaFilter2 and
              passShortEmaFilter3 and
              passDayOfWeekShortFilter and
              passAdxShortFilter and
              passRfShortFilter and
              passSuperTrendShortFilter
//endregion

//region - „É°„Ç§„É≥Êà¶Áï•„É≠„Ç∏„ÉÉ„ÇØ
mainStrategyEnabled = input.bool(true, 'üü• üü• üü•  „É°„Ç§„É≥Êà¶Áï•Ë®≠ÂÆö üü• üü• üü• ', inline="main_strategy")


// „Ç®„É≥„Éà„É™„Éº„Ç∑„Ç∞„Éä„É´
bullSignal = ta.crossover(close, ta.sma(close, 30))
bearSignal = ta.crossunder(close, ta.sma(close, 250))

// „Ç§„Ç∞„Ç∏„ÉÉ„Éà„Ç∑„Ç∞„Éä„É´ („Ç´„Çπ„Çø„É†„Ç§„Ç∞„Ç∏„ÉÉ„ÉàÁî®)
// ‰æã: ÁßªÂãïÂπ≥Âùá„ÅÆÈÄÜ„ÇØ„É≠„Çπ„Åß„Ç§„Ç∞„Ç∏„ÉÉ„Éà
exitBullSignal = ta.crossunder(close, ta.sma(close, 15))  // „É≠„É≥„Ç∞„Éù„Ç∏„Ç∑„Éß„É≥„ÅÆ„Ç§„Ç∞„Ç∏„ÉÉ„ÉàÊù°‰ª∂
exitBearSignal = ta.crossover(close, ta.sma(close, 125))  // „Ç∑„Éß„Éº„Éà„Éù„Ç∏„Ç∑„Éß„É≥„ÅÆ„Ç§„Ç∞„Ç∏„ÉÉ„ÉàÊù°‰ª∂

// „Éù„Ç∏„Ç∑„Éß„É≥„Çπ„ÉÜ„Éº„Çø„Çπ„ÉÅ„Çß„ÉÉ„ÇØ
validOpenLongPosition = bullSignal and not (strategy.opentrades.size(strategy.opentrades - 1) > 0)
validOpenShortPosition = bearSignal and not (strategy.opentrades.size(strategy.opentrades - 1) < 0)
longIsActive = validOpenLongPosition or strategy.opentrades.size(strategy.opentrades - 1) > 0 and not exitBullSignal
shortIsActive = validOpenShortPosition or strategy.opentrades.size(strategy.opentrades - 1) < 0 and not exitBearSignal

// „Ç®„É≥„Éà„É™„ÉºÊôÇ„ÅÆATR
openAtr = ta.valuewhen(validOpenLongPosition or validOpenShortPosition, ta.atr(atrStopLength), 0)
openAtrTakeProfit = ta.valuewhen(validOpenLongPosition or validOpenShortPosition, ta.atr(atrTakeProfitLength), 0)
//endregion

//region - „Çπ„Éà„ÉÉ„Éó„É≠„ÇπË®àÁÆó
useStopLoss = stopType != 'None'
usePercentageStopLoss = stopType == 'Percent'
useAtrStopLoss = stopType == 'ATR'
useAtrTrailingStopLoss = stopType == "ATR Trailing"

// „Éë„Éº„Çª„É≥„Éà„Çπ„Éà„ÉÉ„Éó„É≠„Çπ
longPercentageStopLossPrice = strategy.position_avg_price * (1 - lossPercentage)
shortPercentageStopLossPrice = strategy.position_avg_price * (1 + lossPercentage)

// ATR„Çπ„Éà„ÉÉ„Éó„É≠„Çπ
atrLongStopLossPrice = strategy.position_avg_price - openAtr * riskRatioATR
atrShortStopLossPrice = strategy.position_avg_price + openAtr * riskRatioATR

// ATR„Éà„É¨„Éº„É™„É≥„Ç∞„Çπ„Éà„ÉÉ„Éó„É≠„Çπ
atrTrailing = ta.atr(atrTrailingLength)
atrTrailingLoss = atrTrailingMultiplier * atrTrailing
// ATR„Éà„É¨„Éº„É™„É≥„Ç∞„Çπ„Éà„ÉÉ„Éó„É≠„Çπ„ÅÆË®àÁÆó„ÇíÁ∞°Á¥†Âåñ
var float atrTrailingLongStop = na
var float atrTrailingShortStop = na

// „É≠„É≥„Ç∞„Éù„Ç∏„Ç∑„Éß„É≥„ÅÆ„Éà„É¨„Éº„É™„É≥„Ç∞„Çπ„Éà„ÉÉ„Éó
if strategy.position_size > 0
    atrTrailingLongStop := na(atrTrailingLongStop[1]) ? close - atrTrailingLoss : math.max(atrTrailingLongStop[1], close - atrTrailingLoss)
    atrTrailingShortStop := na
else if strategy.position_size < 0
    atrTrailingShortStop := na(atrTrailingShortStop[1]) ? close + atrTrailingLoss : math.min(atrTrailingShortStop[1], close + atrTrailingLoss)
    atrTrailingLongStop := na
else
    atrTrailingLongStop := na
    atrTrailingShortStop := na

// „Éà„É¨„Éº„É™„É≥„Ç∞„Çπ„Éà„ÉÉ„Éó„É≠„Çπ‰æ°Ê†º„ÅÆË®àÁÆó
atrTrailingStopLossPrice = strategy.position_size > 0 ? atrTrailingLongStop : strategy.position_size < 0 ? atrTrailingShortStop : na

// ÊúÄÁµÇÁöÑ„Å™„Çπ„Éà„ÉÉ„Éó„É≠„Çπ‰æ°Ê†º
finalLongStopLossPrice = 0.0
finalShortStopLossPrice = 0.0

finalLongStopLossPrice := if usePercentageStopLoss
    longPercentageStopLossPrice
else if useAtrStopLoss
    atrLongStopLossPrice
else if useAtrTrailingStopLoss
    atrTrailingStopLossPrice

finalShortStopLossPrice := if usePercentageStopLoss
    shortPercentageStopLossPrice
else if useAtrStopLoss
    atrShortStopLossPrice
else if useAtrTrailingStopLoss
    atrTrailingStopLossPrice

longStopLossPrice = useStopLoss ? finalLongStopLossPrice : na
shortStopLossPrice = useStopLoss ? finalShortStopLossPrice : na

// Á∑äÊÄ•„Çπ„Éà„ÉÉ„Éó„É≠„Çπ
emergencyLongStopLossPrice = finalLongStopLossPrice * (1 - emergencyStopPercentage)
emergencyShortStopLossPrice = finalShortStopLossPrice * (1 + emergencyStopPercentage)
//endregion

//region - „ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„ÉàË®àÁÆó
useTakeProfit = takeProfitType != 'None'

// „Éà„É¨„Éº„É™„É≥„Ç∞„Éô„Éº„Çπ„ÅÆË®àÁÆó („Ç®„É≥„Éà„É™„Éº‰æ°Ê†º„Å®„Çπ„Éà„ÉÉ„Éó„É≠„Çπ„ÅÆÂ∑Æ)
trailingBaseLong = strategy.position_avg_price - longStopLossPrice
trailingBaseShort = shortStopLossPrice - strategy.position_avg_price

// „ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà‰æ°Ê†º
longTakeProfitPrice = switch takeProfitType
    'Percent' => strategy.position_avg_price * (1 + longProfitPercentage)
    'RR' => strategy.position_avg_price + (trailingBaseLong * longRiskRewardRatio)
    'ATR' => close + longTakeProfitAtrMultiplier * openAtrTakeProfit
    => na

shortTakeProfitPrice = switch takeProfitType
    'Percent' => strategy.position_avg_price * (1 - shortProfitPercentage)
    'RR' => strategy.position_avg_price - (trailingBaseShort * shortRiskRewardRatio)
    'ATR' => close - shortTakeProfitAtrMultiplier * openAtrTakeProfit
    => na

longTakeProfit = useTakeProfit ? longTakeProfitPrice : na
shortTakeProfit = useTakeProfit ? shortTakeProfitPrice : na
//endregion

//region - „Éà„É¨„Éº„É™„É≥„Ç∞„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà„É≠„Ç∏„ÉÉ„ÇØ
// „ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà‰æ°Ê†º„ÅÆÂàùÊúüÂåñ („Éà„É¨„Éº„É™„É≥„Ç∞Áî®)
var float longTrailingTakeProfitPrice = na
longTrailingTakeProfitPrice := if (longIsActive)
    if (validOpenLongPosition)
        longTakeProfitPrice
    else
        nz(longTrailingTakeProfitPrice[1], longTakeProfitPrice)
else
    na

longTrailingTakeProfitStepTicks = deviationMethod == 'PERC' ? longTrailingTakeProfitPrice * trailingTakeProfitDeviationPerc / syminfo.mintick : deviationMethod == 'ATR' ? deviationAtrMultiplier * openAtr / syminfo.mintick : na

var float shortTrailingTakeProfitPrice = na
shortTrailingTakeProfitPrice := if (shortIsActive)
    if (validOpenShortPosition)
        shortTakeProfitPrice
    else
        nz(shortTrailingTakeProfitPrice[1], shortTakeProfitPrice)
else
    na

shortTrailingTakeProfitStepTicks = deviationMethod == 'PERC' ? shortTrailingTakeProfitPrice * trailingTakeProfitDeviationPerc / syminfo.mintick : deviationMethod == 'ATR' ? deviationAtrMultiplier * openAtr / syminfo.mintick : na
//endregion


//region - Ê≥®Êñá„Çµ„Ç§„Ç∫Ë®àÁÆó
// „Éò„É´„Éë„ÉºÈñ¢Êï∞: „Éë„Éº„Çª„É≥„ÉÜ„Éº„Ç∏„ÇíÈáëÈ°ç„Å´Â§âÊèõ
percent2money(price, percent) =>
    price * percent / 100 * syminfo.pointvalue

// „Éò„É´„Éë„ÉºÈñ¢Êï∞: „É™„Çπ„ÇØ„Å®„Çπ„Éà„ÉÉ„Éó„É≠„Çπ„Å´Âü∫„Å•„ÅÑ„Å¶„Éù„Ç∏„Ç∑„Éß„É≥„Çµ„Ç§„Ç∫„ÇíË®àÁÆó
calcPositionSize(entryPrice, stopLossPercentage) =>
    riskAmount = strategy.equity * riskValue / 100
    riskAmount / percent2money(entryPrice, stopLossPercentage)

// „Çπ„Éà„ÉÉ„Éó„É≠„ÇπÈ°ç („É™„Çπ„ÇØË®àÁÆóÁî®)
stopLossAmount = stopType == 'ATR' ? openAtr * riskRatioATR : stopType == "ATR Trailing" ? atrTrailingMultiplier * atrTrailing : na
stopLossPercentage = math.abs((1 - (close - stopLossAmount) / close) * 100)
riskAmount = strategy.equity * riskValue / 100  // ÂêàË®à„É™„Çπ„ÇØÈ°ç
entryQuantity = math.abs(riskAmount / stopLossPercentage * 100) / close // „É™„Çπ„ÇØ„Å´Âü∫„Å•„ÅèÊï∞Èáè

// ÂãïÁöÑ„É™„Çπ„ÇØË™øÊï¥ (DA)
riskSource = switch riskSourceInput
    'close' => close
    'volume' => volume
    'MA 5' => ta.sma(close, 5)
    'MA 25' => ta.sma(close, 25)
    'MACD' => ta.sma(close, 5) - ta.sma(close, 25)
    'volume MA' => ta.sma(volume, 25)
    'ATR' => ta.rma(ta.tr(true), 14)
    'VWAP' => ta.vwap(close)
    'RSI' => ta.rsi(close, 14)
    'MFI' => ta.mfi(close, 14)
    'ADX' => ta.sma(dx, adxLength)
    => close

riskHighest = ta.highest(riskSource, 100)
riskLowest = ta.lowest(riskSource, 100)
riskThird = (riskHighest - riskLowest) / riskBandwidth
riskZone1 = riskLowest + riskThird
riskZone2 = riskHighest - riskThird

volumeMultiplier = 1.0

if riskLowest <= riskSource and riskSource <= riskZone1
    volumeMultiplier := lowZoneMultiplier
if riskZone1 < riskSource and riskSource <= riskZone2
    volumeMultiplier := midZoneMultiplier
if riskZone2 < riskSource and riskSource <= riskHighest
    volumeMultiplier := highZoneMultiplier

orderSize = (strategy.equity / close)
orderSize := (strategy.equity / close * volumeMultiplier)

// „Éù„Ç∏„Ç∑„Éß„É≥„Çµ„Ç§„Ç∫Ë®àÁÆó„Çí„Çπ„Ç§„ÉÉ„ÉÅÊñá„ÅßÂÆüË£Ö
riskBasedQuantity = switch stopType
    'Percent' => calcPositionSize(close, (lossPercentage * 100))
    'ATR' => math.abs(riskAmount / stopLossPercentage * 100) / close
    'ATR Trailing' => math.abs(riskAmount / stopLossPercentage * 100) / close
    => na

finalQuantity = switch setRisk
    "„É™„Çπ„ÇØ„Éô„Éº„Çπ" => riskBasedQuantity
    "„É¨„Éê„É¨„ÉÉ„Ç∏" => math.min(math.max(.000001, strategy.equity / close * leverage), 1000000000)
    "„ÉÜ„ÇØ„Éã„Ç´„É´„Ç¢„É´„Ç¥" => orderSize
    => na
//endregion

//region - „Çª„ÉÉ„Ç∑„Éß„É≥„Å®ÊôÇÈñìÁÆ°ÁêÜ
// „Éê„Éº„Ç§„É≥„Çª„ÉÉ„Ç∑„Éß„É≥Èñ¢Êï∞
barInSession(sessionString) =>
    time(timeframe.period, sessionString, "Asia/Tokyo") != 0

inSession = barInSession(tradeSession)
okToTradeInSession = closeSession ? inSession : true
newSession = inSession and not inSession[1]

// ÁâπÂÆö„ÅÆÊôÇÈñì„Å´Èñâ„Åò„Çã
var int closeTimeCounter = 0
closeTimeCondition = hour[closeTimeCounter] == closeTimeHour
closeTimeMinuteCondition = minute[closeTimeCounter] == closeTimeMinute

// „Éù„Ç∏„Ç∑„Éß„É≥‰øùÊåÅÊúüÈôê
barsSinceLastEntry() =>
    strategy.opentrades > 0 ? bar_index - strategy.opentrades.entry_bar_index(strategy.opentrades - 1) : na
//endregion

//region - Áµ±Âêà„Åï„Çå„ÅüÊù°‰ª∂
okToTrade = tradeDateIsAllowed() and okToTradeInSession
//endregion

//region - „Çπ„Éà„É©„ÉÜ„Ç∏„ÉºÂÆüË°å
// „Ç®„É≥„Éà„É™„ÉºÊù°‰ª∂
// „É≠„É≥„Ç∞„Ç®„É≥„Éà„É™„Éº
if bullSignal and okToTrade and okToTradeInSession and enableLongStrategy and goForLong 
    strategy.entry('„É≠„É≥„Ç∞', strategy.long, qty=useStopLoss ? finalQuantity : na)

// „Ç∑„Éß„Éº„Éà„Ç®„É≥„Éà„É™„Éº
if bearSignal and okToTrade and okToTradeInSession and enableShortStrategy and goForShort 
    strategy.entry('„Ç∑„Éß„Éº„Éà', strategy.short, qty=useStopLoss ? finalQuantity : na)

// „ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà„Å®„Çπ„Éà„ÉÉ„Éó„É≠„Çπ„ÅÆË®≠ÂÆö
// „É≠„É≥„Ç∞„Éù„Ç∏„Ç∑„Éß„É≥
if strategy.position_size > 0
    if takeProfitTrailingEnabled
        // „Éà„É¨„Éº„É™„É≥„Ç∞„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà„Çí‰ΩøÁî®
        strategy.exit(id='„É≠„É≥„Ç∞TP/SL', from_entry='„É≠„É≥„Ç∞',
                     stop=closeStop ? na : longStopLossPrice,
                     trail_price=longTrailingTakeProfitPrice,
                     trail_offset=longTrailingTakeProfitStepTicks)
    else
        // ÈÄöÂ∏∏„ÅÆ„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà„Çí‰ΩøÁî®
        strategy.exit(id='„É≠„É≥„Ç∞TP/SL', from_entry='„É≠„É≥„Ç∞',
                     limit=longTakeProfit,
                     stop=closeStop ? na : longStopLossPrice)

// „Ç∑„Éß„Éº„Éà„Éù„Ç∏„Ç∑„Éß„É≥
if strategy.position_size < 0
    if takeProfitTrailingEnabled
        // „Éà„É¨„Éº„É™„É≥„Ç∞„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà„Çí‰ΩøÁî®
        strategy.exit(id='„Ç∑„Éß„Éº„ÉàTP/SL', from_entry='„Ç∑„Éß„Éº„Éà',
                     stop=closeStop ? na : shortStopLossPrice,
                     trail_price=shortTrailingTakeProfitPrice,
                     trail_offset=shortTrailingTakeProfitStepTicks)
    else
        // ÈÄöÂ∏∏„ÅÆ„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà„Çí‰ΩøÁî®
        strategy.exit(id='„Ç∑„Éß„Éº„ÉàTP/SL', from_entry='„Ç∑„Éß„Éº„Éà',
                     limit=shortTakeProfit,
                     stop=closeStop ? na : shortStopLossPrice)

// ÂèçÂØæ„Ç∑„Ç∞„Éä„É´„ÅßÈñâ„Åò„Çã
if closeOnOpposite and strategy.position_size > 0 and bearSignal
    strategy.close(id='„É≠„É≥„Ç∞', comment='„Ç∑„Éß„Éº„Éà„Ç∑„Ç∞„Éä„É´\n„É≠„É≥„Ç∞„ÇØ„É≠„Éº„Ç∫')
if closeOnOpposite and strategy.position_size < 0 and bullSignal
    strategy.close(id='„Ç∑„Éß„Éº„Éà', comment='„É≠„É≥„Ç∞„Ç∑„Ç∞„Éä„É´\n„Ç∑„Éß„Éº„Éà„ÇØ„É≠„Éº„Ç∫')

// „Ç´„Çπ„Çø„É†„ÇØ„É≠„Éº„Ç∫„Ç∑„Ç∞„Éä„É´ („Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„Éº„Çí‰ΩøÁî®)
if strategy.position_size > 0 and exitBullSignal
    strategy.close(id='„É≠„É≥„Ç∞', comment='„Ç´„Çπ„Çø„É†„ÇØ„É≠„Éº„Ç∫„Ç∑„Ç∞„Éä„É´\n„É≠„É≥„Ç∞„ÇØ„É≠„Éº„Ç∫')
if strategy.position_size < 0 and exitBearSignal
    strategy.close(id='„Ç∑„Éß„Éº„Éà', comment='„Ç´„Çπ„Çø„É†„ÇØ„É≠„Éº„Ç∫„Ç∑„Ç∞„Éä„É´\n„Ç∑„Éß„Éº„Éà„ÇØ„É≠„Éº„Ç∫')

// ÁâπÂÆö„ÅÆÊôÇÈñì„Å´Èñâ„Åò„Çã
if setCloseTime and closeTimeCondition and closeTimeMinuteCondition and strategy.position_size > 0
    strategy.close(id='„É≠„É≥„Ç∞', comment='„É≠„É≥„Ç∞„ÇØ„É≠„Éº„Ç∫ÊôÇÈñì')
if setCloseTime and closeTimeCondition and closeTimeMinuteCondition and strategy.position_size < 0
    strategy.close(id='„Ç∑„Éß„Éº„Éà', comment='„Ç∑„Éß„Éº„Éà„ÇØ„É≠„Éº„Ç∫ÊôÇÈñì')

// ÊôÇÈñìÂà∂Èôê„Ç§„Ç∞„Ç∏„ÉÉ„Éà
if setTimeLimit and barsSinceLastEntry() >= holdLongBars and strategy.position_size > 0
    strategy.close(id='„É≠„É≥„Ç∞', comment='„É≠„É≥„Ç∞ÊôÇÈñìÂà∂Èôê')
if setTimeLimit and barsSinceLastEntry() >= holdShortBars and strategy.position_size < 0
    strategy.close(id='„Ç∑„Éß„Éº„Éà', comment='„Ç∑„Éß„Éº„ÉàÊôÇÈñìÂà∂Èôê')

// Á∑äÊÄ•„Çπ„Éà„ÉÉ„Éó„É≠„Çπ„Ç§„Ç∞„Ç∏„ÉÉ„Éà
if closeStop and strategy.position_size > 0 and close <= emergencyLongStopLossPrice
    strategy.close(id='„É≠„É≥„Ç∞', comment='Á∑äÊÄ•„Çπ„Éà„ÉÉ„Éó„É≠„É≥„Ç∞')
if closeStop and strategy.position_size < 0 and close >= emergencyShortStopLossPrice
    strategy.close(id='„Ç∑„Éß„Éº„Éà', comment='Á∑äÊÄ•„Çπ„Éà„ÉÉ„Éó„Ç∑„Éß„Éº„Éà')

// Ë®±ÂèØ„Åï„Çå„ÅüÂèñÂºïÊúüÈñì„ÅÆÁµÇ‰∫ÜÊôÇ„Å´„Çπ„Éà„É©„ÉÜ„Ç∏„Éº„ÇíÈñâ„Åò„Çã
closeStrategy = not tradeDateIsAllowed()

if closeStrategy
    strategy.close_all()
//endregion

//region - „Éó„É≠„ÉÉ„Éà
plotStopLossTakeProfit = input.bool(true, title="üìä TP/SL„Éó„É≠„ÉÉ„Éà„ÇíË°®Á§∫", group="üìä„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ")

// „Çπ„Éà„ÉÉ„Éó„É≠„Çπ„Éó„É≠„ÉÉ„Éà - „É≠„É≥„Ç∞
plotLongStopLoss = plot(plotStopLossTakeProfit and strategy.position_size > 0 ? longStopLossPrice : na, style=plot.style_linebr, color=color.new(color.red, 0), linewidth=3, title="„É≠„É≥„Ç∞SL")
plotEmergencyLongStopLoss = plot(closeStop and plotStopLossTakeProfit and strategy.position_size > 0 ? emergencyLongStopLossPrice : na, style=plot.style_linebr, color=color.new(color.orange, 0), linewidth=3, title="„É≠„É≥„Ç∞Á∑äÊÄ•SL")

// „Çπ„Éà„ÉÉ„Éó„É≠„Çπ„Éó„É≠„ÉÉ„Éà - „Ç∑„Éß„Éº„Éà
plotShortStopLoss = plot(plotStopLossTakeProfit and strategy.position_size < 0 ? shortStopLossPrice : na, style=plot.style_linebr, color=color.new(color.red, 0), linewidth=3, title="„Ç∑„Éß„Éº„ÉàSL")
plotEmergencyShortStopLoss = plot(closeStop and plotStopLossTakeProfit and strategy.position_size < 0 ? emergencyShortStopLossPrice : na, style=plot.style_linebr, color=color.new(color.orange, 0), linewidth=3, title="„Ç∑„Éß„Éº„ÉàÁ∑äÊÄ•SL")

// „ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà„Éó„É≠„ÉÉ„Éà - „É≠„É≥„Ç∞
plotLongTakeProfit = plot(plotStopLossTakeProfit and strategy.position_size > 0 ? longTakeProfit : na, style=plot.style_linebr, color=color.new(color.green, 0), linewidth=3, title="„É≠„É≥„Ç∞„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà")

// „ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà„Éó„É≠„ÉÉ„Éà - „Ç∑„Éß„Éº„Éà
plotShortTakeProfit = plot(plotStopLossTakeProfit and strategy.position_size < 0 ? shortTakeProfit : na, style=plot.style_linebr, color=color.new(color.green, 0), linewidth=3, title="„Ç∑„Éß„Éº„Éà„ÉÜ„Ç§„ÇØ„Éó„É≠„Éï„Ç£„ÉÉ„Éà")

// „Ç®„É≥„Éà„É™„Éº‰æ°Ê†º„Éó„É≠„ÉÉ„Éà
plotEntryPrice = plot(plotStopLossTakeProfit ? strategy.position_avg_price : na, color=color.new(color.white, 50), style=plot.style_linebr, linewidth=3, title="„Ç®„É≥„Éà„É™„Éº‰æ°Ê†º ")

// Â°ó„Çä„Å§„Å∂„Åó
fill(plotEntryPrice, plotLongStopLoss, color.new(color.red, 80))
fill(plotEntryPrice, plotShortStopLoss, color.new(color.red, 80))
fill(plotEntryPrice, plotLongTakeProfit, color.new(color.green, 80))
fill(plotEntryPrice, plotShortTakeProfit, color.new(color.green, 80))
fill(plotLongStopLoss, plotEmergencyLongStopLoss, color.new(color.orange, 80))
fill(plotShortStopLoss, plotEmergencyShortStopLoss, color.new(color.orange, 80))
//endregion