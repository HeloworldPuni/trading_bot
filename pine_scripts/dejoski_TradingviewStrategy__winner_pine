
//@version=2
strategy("JamesTheDayTrader, Trade To Win", shorttitle="JTDT_Trade_To_WIN", overlay=false)


threshold = input(title="Price Difference Threshold", type=float, defval=0, step=0.001)

getDiff() =>
    yesterday=security(tickerid, '240', close[1])
    today=security(tickerid, '240', close)
    delta=today-yesterday
    percentage=delta/yesterday

closeDiff = getDiff()

buying = closeDiff > threshold ? true : closeDiff < -threshold ? false : buying[1]

hline(0, title="zero line")

bgcolor(buying ? green : red, transp=25)
plot(closeDiff, color=silver, style=area, transp=75)
plot(closeDiff, color=aqua, title="prediction")

longCondition = buying
if (longCondition)
    strategy.entry("Long", strategy.long)

shortCondition = buying != true
if (shortCondition)
    strategy.entry("Short", strategy.short)
    
alertcondition(longCondition, title='longCondition', message='longCondition!')
alertcondition(shortCondition, title='shortCondition', message='shortCondition!')
